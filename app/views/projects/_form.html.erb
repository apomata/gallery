<%= form_for(@project) do |f| %>
  <% if @project.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</h2>

      <ul>
      <% @project.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div class="">
  </div>

  <div class="col-xs-11 col-xs-offset-1 pull-left">
    <h1 class="turninline-block">
      <%= f.label :title %><br>
      <strong>
        <%= f.text_field :title %>
      </strong>
    </h1>
      <%= f.submit %>
  </div>

<div class="col-xs-7 col-xs-offset-1 container">
  <h3>
    <strong>Picture</strong>
  </h3>
  <div class="row">
    <div id="mainpic" class="col-xs-8">
      <%= image_tag(@project.image_url, :class => 'list_image', :id => "mainimage") %>
      <%#= image_tag picture.url %>
    </div>
    <div class="col-xs-4">
        <div id="addpicturepanel" class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Add a picture</h3>
          </div>
          <div class="panel-body">
            <%= form_for(@project) do |f| %>
              <%= f.file_field :picture %>
            <%end%>
            <br>
            <button class="pull-right">
              Add
            </button>
          </div>
        </div>
      <ul id='imagebar' class="list-group scrollable">
        <%# @project.pictures.each do |picture| %>
        <% for i in 0..14 %>
          <li class="list-group-item">
            thumbnail
            <%#= image_tag picture.url(:thumb) %>
          </li>
        <%end%>
      </ul>
    </div>
  </div>
  <br>
  <br>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Description</h3>
    </div>
    <div class="panel-body">
      <%= f.text_area :description, :class => "form_control col-xs-12", :rows => '15' %>
    </div>
  </div>

  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Special Links</h3>
    </div>
    <div class="panel-body">
      <ul class="list-group">
        <%# @project.profiles.each do |profile| %>
          <li class="list-group-item">
            links will go here
          </li>
        <%#end%>
      </ul>
    </div>
  </div>
</div>


<div class="col-xs-3 col-xs-offset-1 container">
  <br>
  <%# if current_user == @profile %>
  <% if @project.profiles.include?(current_user)%>
    <%= link_to 'Destroy', @project, method: :delete, data: { confirm: 'Are you sure?' } %>
  <% end %>
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Creators</h3>
    </div>
    <div class="panel-body">
      <ul class="list-group">
        <% @project.profiles.each do |profile| %>
          <li class="list-group-item">
            <%= link_to profile.first_name, profile_path(profile)%>
          </li>
        <%end%>
      </ul>
    </div>
  </div>
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Other projects by the creators</h3>
    </div>
    <div class="panel-body">
      <ul class="list-group">
        <% @project.profiles.each do |profile| %>
          <% creator_project = profile.projects.first%>
          <li class="list-group-item">
            <%= link_to "#{creator_project.title} by #{profile.first_name}", project_path(creator_project)%>
          </li>
        <%end%>
      </ul>
    </div>
  </div>
</div>

<script type="text/javascript">
      $(document).ready(function() {
        //var picheight = $('#mainpic').height();
        var picheight = $('#mainpic').height();
        var picpanelheight = $('#addpicturepanel').height();
        var mainimageheight = $('#mainimage').height();
        if (!mainimageheight){
          $('#imagebar').height(picpanelheight) ;
        }else{
          $('#imagebar').height(picheight-picpanelheight) ;
        }
      });
</script>






<% end %>
